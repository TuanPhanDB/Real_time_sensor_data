## Real-time Sensor Data

This is a project that simulates the IoT project to control the temperature and humidity for the services that can be applied to plant-houses, stock storages, smart houses, ...

This project provides scripts for simulating real-time sensor data and streaming by Kafka services. The raw stream data is stored in Cassandra and aggregated data in PostgreSQL. Grafana is used for visualizing streaming data and showing threshold that help observe and make action to control the temperature and humidity.

### Project Structure
### Project Workflow
#### 1. Data Generator
- The script data_generator.py is used to generate random values of temperature and humidity from different sensor devices. Using FastAPI to stream real-time data to simulate real IoT devices. This can be found on http://localhost:8000/stream
#### 2. Kafka Streaming Services
- There are 2 Kafka parts: producer and consumer
- Producer: The data that is generated by data_generator will be handled by the producer, where it will be transformed and assigned to the corresponding topic in Kafka.
- Consumer: The data in Kafka streaming now will be consumed. The raw stream data will be written into the Cassandra database for live dashboard and archival purpose. Then, that data will be aggregated to stored in PostgreSQL for further reporting and analysis.
#### 3. Dashboard
- The data from Cassandra will be queried to visualize on the Grafana dashboard. The dashboard will show the current status of the temperature and humidity of the selected device.
- ![dashboard](https://github.com/user-attachments/assets/5603b1d6-ef86-4514-88f6-5a942a6aaf58)

### Getting Started
- **Note: The start_services.py only works on Windows PowerShell. To use it on the Linux Terminal, change the commands in the start_services.py file.**
- Clone the project
  ```terminal
  git clone https://github.com/TuanPhanDB/Real_time_sensor_data.git
  ```
- Run the Docker Compose file
  ```terminal
  docker compose up -d
  ```
- Create a virtual environment
  ```terminal
  py -m venv .venv
  ```
- Instal requirements
  ```terminal
  pip install -r requirements.txt
  ```
- Start all the files (data_generator.py, producer.py, consumer.py, aggregate_data.py)
  ```terminal
  py start_services.py
  ```
- Set up Grafana dashboard
  - Access: http://localhost:3000/
  - Login: admin/admin123
    



  
